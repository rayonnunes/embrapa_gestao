<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Cadastrar Propriedade - Emprapa</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      content="A fully featured admin theme which can be used to build CRM, CMS, etc."
      name="description"
    />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico" />

    <!-- Bootstrap select pluings -->
    <link
      href="assets/libs/bootstrap-select/bootstrap-select.min.css"
      rel="stylesheet"
      type="text/css"
    />

    <!-- App css -->
    <link
      href="assets/css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />
  </head>

  <body class="bg-white">
    <div id="wrapper">
      @@include('./partials/topbar-initial.html')
    </div>
    <div class="account-pages my-5">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 col-lg-6 col-xl-5">
            <div>
              <div class="text-center mb-4">
                <h2>Cadastrar Nova Propriedade</h2>
              </div>

              <!-- <form action="http://localhost/php-getovi/api/cadastro_propriedade.php" id="form-cadastro-propriedade"> -->
              <form  id="form-cadastro-propriedade">
                <h4 class="my-3">Informações Básicas</h4>
                <div class="row">
                  <div class="col-sm-12">
                    <div class="form-group mb-3">
                      <label for="emailaddress">Nome</label>
                      <input
                        class="form-control"
                        type="text"
                        id="nome-propriedade"
                        placeholder="Nome da Propriedade"
                        name="nome"
                      />
                    </div>
                  </div>
                  <div class="col-md-6 col-sm-12">
                    <div class="form-group mb-3">
                      <label for="estado-propriedade">Estado</label>
                      <select
                        class="form-control select2"
                        id="estado-propriedade"
                        name="estado"
                      >
                        <option>Selecione</option>
                        <optgroup label="Região Norte">
                          <option value="AC">Acre</option>
                          <option value="AP">Amapá</option>
                          <option value="AM">Amazonas</option>
                          <option value="PA">Pará</option>
                          <option value="RO">Rondônia</option>
                          <option value="RR">Roraima</option>
                          <option value="TO">Tocantins</option>
                        </optgroup>
                        <optgroup label="Região Nordeste">
                          <option value="AL">Alagoas</option>
                          <option value="BA">Bahia</option>
                          <option value="CE">Ceará</option>
                          <option value="MA">Maranhão</option>
                          <option value="PB">Paraíba</option>
                          <option value="PE">Pernambuco</option>
                          <option value="PI">Piauí</option>
                          <option value="RN">Rio Grande do Norte</option>
                          <option value="SE">Sergipe</option>
                        </optgroup>
                        <optgroup label="Região Centro-Oeste">
                          <option value="DF">Distrito Federal</option>
                          <option value="GO">Goiás</option>
                          <option value="MT">Mato Grosso</option>
                          <option value="MS">Mato Grosso do Sul</option>
                        </optgroup>
                        <optgroup label="Região Sudeste">
                          <option value="ES">Espírito Santo</option>
                          <option value="MG">Minas Gerais</option>
                          <option value="RJ">Rio de Janeiro</option>
                          <option value="SP">São Paulo</option>
                        </optgroup>
                        <optgroup label="Região Sul">
                          <option value="PR">Paraná</option>
                          <option value="RS">Rio Grande do Sul</option>
                          <option value="SC">Santa Catarina</option>
                        </optgroup>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6 col-sm-12">
                    <div class="form-group mb-3">
                      <label for="municipio-propriedade">Municipio</label>
                      <input
                        class="form-control"
                        type="text"
                        id="municipio-propriedade"
                        placeholder="Cidade"
                        name="municipio"
                      />
                    </div>
                  </div>
                  <div class="col-md-6 col-sm-12">
                    <div class="form-group mb-3">
                      <label for="georref">Coordenadas Geográficas</label>
                      <input
                        class="form-control"
                        type="text"
                        id="georef1"
                        placeholder="-3.693167"
                        name="coordenadas1"
                      />
                    </div>
                    <div class="form-group mb-3">
                      <div class="input-group">
                        <input
                          id="georef2"
                          type="text"
                          class="form-control"
                          placeholder="-40.355052"
                          name="coordenadas2"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6 col-sm-12">
                    <div class="form-group mb-3">
                      <label for="area-total-propriedade"
                        >Registro do INCRA</label
                      >
                      <div class="input-group">
                        <input
                          id="area-total-propriedade"
                          type="text"
                          class="form-control"
                          name="registro"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-12">
                    <div class="form-group mb-3">
                      <label for="area-total-propriedade"
                        >Área Total da Propriedade                        
                      </label>
                      <div class="input-group">
                        <input
                          id="area-total-propriedade"
                          type="number"
                          class="form-control parsley-error"
                          name="area-total"
                        />
                        <div class="input-group-append">
                          <select
                            class="form-control select2"
                            name="select-unidade-area"
                          >
                            <option value="ha" selected>ha</option>
                            <option value="m2">m²</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-12">
                    <div class="form-group mb-3">
                      <label for="municipio-propriedade"
                        >Valor do Hectare na Região</label
                      >
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span
                            class="input-group-text bg-primary text-white b-0"
                            >R$</span
                          >
                        </div>
                        <input
                          id="valor-hectare"
                          type="text"
                          class="form-control"
                          data-toggle="input-mask"
                          data-mask-format="000.000.000.000.000,00"
                          data-reverse="true"
                          name="valor-hectare"
                        />
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  
                  <div class="atividades-exercidas my-4">
                    <h4>Utilização da área da Propriedade
                      <br>
                      <span style="font-size: 7pt;" class="text-danger">
                          &nbsp;Áreas da Propriedade devem somar a Área Total
                      </span>
                    </h4>

                    <!--div class="col-md-12 pr-0">
                                    <div class="custom-control custom-checkbox custom-control-inline mt-3 mr-0">
                                    <div class="row">
                                    <div class="col-md-5 mt-1">
                                    <input type="checkbox" class="custom-control-input" id="check-atividade-ovinos">
                                    <label class="custom-control-label" for="check-atividade-ovinos">Criação de Ovinos</label>
                                  </div>
                                  <div class="col-md-7 pl-0">
                                  <div class="input-group">
                                  <input class="form-control" type="number" id="area-criacao-ovinos" placeholder="Área" disabled>
                                  <div class="input-group-append">
                                  <select class="form-control select2" name="select-unidade-area" disabled>
                                  <option value="m2">m²</option>
                                  <option value="ha">ha</option>
                                  <option value="outro">Outro...</option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div-->

                    <!--div class="col-md-12 pr-0">
                    <div class="custom-control custom-checkbox custom-control-inline mt-3 mr-0">
                    <div class="row">
                    <div class="col-md-5 mt-1">
                    <input type="checkbox" class="custom-control-input" id="check-atividade-caprinos">
                    <label class="custom-control-label" for="check-atividade-caprinos">Criação de Caprinos</label>
                  </div>
                  <div class="col-md-7 pl-0">
                  <div class="input-group">
                  <input class="form-control" type="number" id="area-criacao-caprinos" placeholder="Área" disabled>
                  <div class="input-group-append">
                  <select class="form-control select2" name="select-unidade-area" disabled>
                  <option value="m2">m²</option>
                  <option value="ha">ha</option>
                  <option value="outro">Outro...</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div-->

    

                    <div class="col-md-12 pr-0">
                      <div class="col-md-12">                    
                        <p>
                          <div class="form-group">
                            <label for="area-pastagem"
                              >Área com Pastagem Nativa</label
                            >
                            <div class="input-group">
                              <input type="text" id="area-pastagem" name="area-pastagem" />
                              <span class="input-group-text" id="basic-addon1">ha</span>
                            </div>
                          </div>
                        </p>
                        <p>
                          <div class="form-group">
                            <label for="area-benfeitorias"
                              >Área Benfeitorias</label
                            >
                            <div class="input-group">
                              <input type="text" id="area-benfeitorias" name="area-benfeitoria" />
                              <span class="input-group-text" id="basic-addon1">ha</span>
                            </div>
                          </div>
                        </p>
                        <p>
                          <div class="form-group">
                            <label for="area-reserva"
                              >Área Reserva Legal/mata</label
                            >
                            <div class="input-group">
                              <input type="text" id="area-reserva" name="area-reserva" />
                              <span class="input-group-text" id="basic-addon1">ha</span>
                            </div>
                          </div>
                        </p>                          
                      </div>                                          
                  </div>
                  

                <div class="form-group mb-3">
                  <label for="saldo-propriedade">Saldo Atual da Fazenda</label>
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text bg-primary text-white b-0"
                        >R$</span
                      >
                    </div>
                    <input
                      id="saldo-propriedade"
                      type="text"
                      class="form-control"
                      data-toggle="input-mask"
                      data-mask-format="000.000.000.000.000,00"
                      data-reverse="true"
                      name="saldo"
                    />
                  </div>
                </div>                                                

                <div class="form-group text-center my-3">
                  <a
                    href="selecionar-propriedade.html"
                    class="btn btn-danger width-md btn-rounded"
                    type="reset"
                  >
                    <i class="fas fa-arrow-circle-left"></i>
                    Cancelar
                  </a>
                  <button
                    class="btn btn-outline-primary width-md btn-rounded ml-1"
                    type="reset"
                  >
                    Limpar Campos
                  </button>
                  <!-- <input type="submit" name="submit-cadastro" value="Finalizar &nbsp;" class="btn btn-primary width-md btn-rounded ml-1"> -->
                  <button
                    class="btn btn-primary width-md btn-rounded ml-1"
                    id="btn-finalizar"
                  >
                    Próximo &nbsp;
                    <i class="fas fa-check-circle"></i>
                  </button>
                </div>
              </form>
            </div>
            <!-- end card -->
          </div>
          <!-- end col -->
        </div>
        <!-- end row -->
      </div>
      <!-- end container -->
    </div>
    <!-- end page -->    

    <!-- Vendor js -->
    <script src="assets/js/vendor.min.js"></script>

    <!-- Bootstrap select plugin -->
    <script src="assets/libs/bootstrap-select/bootstrap-select.min.js"></script>
    <script src="assets/libs/select2/select2.min.js"></script>
    <!-- Plugins js -->
    <script src="assets/libs/jquery-mask-plugin/jquery.mask.min.js"></script>
    <script src="assets/libs/autonumeric/autoNumeric-min.js"></script>
    <script src="assets/js/pages/form-masks.init.js"></script>

    <!-- jQuery -->
    <script src="assets/libs/jquery-steps/jquery.steps.min.js"></script>
    <script type="text/javascript">
      let userIds = localStorage.getItem("userIds")
  
      let userJson = JSON.parse(userIds)

      $('#btn-finalizar').click(function(event){
          event.preventDefault()

          let saldo = $('#saldo-propriedade').val()
          saldo = saldo.replace('.','')
          saldo = parseFloat(saldo.replace(',','.'))
          $('#saldo-propriedade').val(saldo)

          let valorHectare = $('#valor-hectare').val()
          valorHectare = valorHectare.replace('.','')
          valorHectare = parseFloat(valorHectare.replace(',','.'))
          $('#valor-hectare').val(valorHectare)

          let data = $('#form-cadastro-propriedade').serialize()
          let id = userJson.id;

          // console.log(data)

          let url = 'http://localhost/php-getovi/api/cadastro_propriedade.php?id='+id;  

          $.ajax({
            url: url,
            method: 'POST',
            data: data,
            dataType: 'json'
          }).done(function(res){            
            userJson.idPropriedade = res.value
            console.log(res)            

            localStorage.setItem("userIds", JSON.stringify(userJson))

            console.log(userJson.idPropriedade)

            let idPropriedade = res.value

            window.location.href = 'http://localhost:3000/cadastrar-propriedade2.html?id='+id+'&idProp='+idPropriedade
          })
      })        
    </script>

    <!-- App js -->
    <script src="assets/js/app.min.js"></script>
  </body>
</html>
